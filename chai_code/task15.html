<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- <div id="counter">0</div> -->
</body>
<script>
//     function x(){
//         let name = "hassan"
//       let d=  function y(){
//            console.log(`${name } `)
          
//         }
//        return d;
        
//     }
    
//   let c =  x()
//   c()
            //   


//       function counter(){
//       let   privateCounter =0;
//      return {
//         inner: function (){
//         privateCounter ++;
//         //  console.log(privateCounter)
//         // // console.log(`\r${privateCounter}`)
//         // process.stdout.write(`\r${privateCounter}`);

//      },
//      getValue: function () {
//           return privateCounter
//       }
       
//     }
//       }
//  let get = counter()
// //  console.log(get)
//     get.inner();
//    get.inner(); 
//    get.inner();
//    get.inner(); 
//    get.inner();
//   console.log(get.getValue())
  
  

      //
//   function counter() {
//   let count = 0
//   return {
//       increment: function () {
//           count++
//       },
//       getValue: function () {
//           return count
//       }
//   }
// }

// let counter1 = counter()
// // counter1.increment()
// // counter1.increment()
// console.log(counter1.getValue())
// 


    
    
        // function counter() {
        //     let privateCounter = 0;
        //     function inner() {
        //         privateCounter++;
        //         document.getElementById('counter').textContent = privateCounter; // Update the HTML element
        //     }
        //     return inner;
        // }

        // let get = counter();

        // setTimeout(get, 1000);
        // setTimeout(get, 2000);
        // setTimeout(get, 3000);
        // setTimeout(get, 4000);
        // setTimeout(get, 5000);
        // setTimeout(get, 6000);
    // 

// mmm


    // function name() {
    //     let x;
    //         function inner() {
    //            x=Math.floor( Math.random()*10)
    //           console.log(x)
    //         }
    //         return inner;
    //     }

    //     let get =name();
    //   setTimeout(get,1000)
    //   setTimeout(get,2000)
    //   setTimeout(get,3000)
    //   setTimeout(get,4000)

//       function createdIdGenerator() {
//   let lastId = 0

//   return function () {
//       lastId += 1
//       return lastId
//   }
// }

// const generateId = createdIdGenerator()

// console.log(generateId())
// console.log(generateId())
// console.log(generateId())




// function createGreeting(userName) {
   
//     function greet() {
//         console.log(`Welcome ${userName}`);
//     }
//     return greet;
// }

// let greetUser = createGreeting("Hassan");
// greetUser(); // Logs: Welcome Hassan
//  greetUser = createGreeting("akbar");
// greetUser();
//  greetUser = createGreeting("ali");
// greetUser();

 
// function createFunctions() {
//     let functions = [];
    
//     for (let i = 0; i < 5; i++) {
//         functions.push(function() {
//             console.log(i); // Capture the current value of i through closure
//         });
//     }
    
//     return functions;
// }

// let funcs = createFunctions();

// // Call each function to log its index
// funcs.forEach(func => func());
// //
 




// const ItemModule = (() => {
//     const items = [];

//     const addItem = (item) => {
//         items.push(item);
//     }

//     const removeItem = (index) => {
//         items.splice(index, 1);
//     }

//     const listItems = () => {
//         return items;
//     }

//     return {
//         addItem,
//         removeItem,
//         listItems,
//     }
// })();


// ItemModule.addItem("Item 1");
// ItemModule.addItem("Item 2");
// ItemModule.addItem("Item 3");

// console.log(ItemModule.listItems());

// // ItemModule.removeItem(1);

// console.log(ItemModule.listItems());

// again

//  function ItemModule ()  {
//     const items = [];

//    function addItem (item)  {
//         items.push(item);
//     }

//    function removeItem (index)  {
//         items.splice(index, 1);
//     }

//     function listItems  ()  {
//         return items;
//     }

//     return {
//         addItem,
//         removeItem,
//         listItems,
//     }
// };

// let x =ItemModule()
// x.addItem("Item 1");
// x.addItem("Item 2");
// x.addItem("Item 3");

// console.log(x.listItems());

// x.removeItem(1);

// console.log(x.listItems());

//  task 7 

// function memoize(fn) {
//     const cache = {};

//     return function(...args) {
//         const key = JSON.stringify(args);
//         if(cache[key]) {
//             return cache[key];
//         } else {
//             const result = fn(...args);
//             cache[key] = result;
//             return result
//         }
//     };
// }

// function slowFunction(num) {
    
//     for(let i=0;i<1e6; i++) {

//     }
//     return num * 2;
// }

// const memoizedSlowFunction = memoize(slowFunction);

// console.log(memoizedSlowFunction(5)); 
// console.log(memoizedSlowFunction(5)); 
// console.log(memoizedSlowFunction(10)); 
// console.log(memoizedSlowFunction(10)); 

// // Task 8:
function memoizeNew(fn) {
    const cache = {};
    return function(...args) {
        const key = args.toString();
        if(cache[key] !== undefined) {
            return cache[key];
        };
        const result = fn(...args);
        cache[key] = result;
        return result; 
    };
}

function factorial(n) {
    if(n <= 1) {
        return 1;
    }
    return n*factorial(n-1);
}

const memoizeFactorial = memoizeNew(factorial);

console.log(memoizeFactorial(3));
console.log(memoizeFactorial(6));
 


</script>
</html>


// Tasks/Activites

// Activity 1: Understanding Closures

// Task 1:

function outer(){
    let name = "Saurav Jha";
    console.log("Outer Function.")
    function inner(){
        return  `Inner Function:- My Name is ${name}.`
    }
    return inner();
}

console.log(outer());

// Task 2:

function counter(){
    let count=0;

    return {
        increment: function(){
            count++;
            return count;
        },
        getCount: function(){
            return count;
        }
    };

}

 const myCounter = counter();
 console.log("Incremented to:", myCounter.increment());
console.log("Incremented to:", myCounter.increment());
console.log("Current Count:", myCounter.getCount());  
console.log("Incremented to:", myCounter.increment()); 

// Activity 2: Practical Closures

// Task 3:

function uniqueIdGenerator(){
   
    let lastId = 1;
    
    return function (){
        lastId++;
        return `#${lastId}`
    }

   
}

const generateUniqueId = uniqueIdGenerator();

console.log("Unique Id: ");
console.log(generateUniqueId());
console.log(generateUniqueId());
console.log(generateUniqueId());

// Task 4:

function greetUser(name){
    return function(){
        return `Welcome ${name} you are onboarded..`
    }
}

const person = greetUser("Saurav");
console.log(person());


// Activity 3: Closure in Loops

// Task 5:

let functionArray = [];
for (let i = 0; i < 5; i++) {
    functionArray.push((function(index){
        return function(){
            console.log(`Index: ${index}`);
            }
    })(i))
}

for(let j=0;j<functionArray.length;j++){
    functionArray[j]();
}

// Activity 4: Module Pattern

// Task 6:

function collectionItems(){
    let items = [];

    function addItem(item){
        items.push(item);
    }
    function removeItems(item){
       items =  items.filter((it)=>it!=item)
    }
    function listItems(){
        return items;
    }

    return {
        addItem,
        removeItems,
        listItems
    }
}

const items = collectionItems();
items.addItem("Item:1");
items.addItem("Item:2");
items.addItem("Item:3");
items.addItem("Item:4");
items.addItem("Item:5");
console.log(items.listItems())
items.removeItems("Item:3")
console.log(items.listItems())

// Activity 5: Memoization

// Task 7:

function memoize(func){
    const cache = {};

    return function(...args){
        const key = JSON.stringify(args);
        console.log("key: ",key);
        if(cache[key]){
            console.log("Cache: ",cache[key])
            return cache[key];
        }
        const result = func(...args);
        console.log("Result: ",result)
        cache[key] = result;
        return result;
    }
}

function add(a,b){
    return a+b;
}

const memoizedAdd = memoize(add);

console.log(memoizedAdd(1,2));
console.log(memoizedAdd(1,2));
console.log(memoizedAdd(7,2));

// Task 8:

function factorial(n) {
    if (n === 0 || n === 1) {
        return 1;
        }
        return n * factorial(n-1);
 }

 const memoizedFactorial = memoize(factorial);
 console.log(memoizedFactorial(5));
 console.log(memoizedFactorial(5));
 console.log(memoizedFactorial(4));
